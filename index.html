
<!DOCTYPE html>

<html>
	<head>
		<style type="text/css">
		.bckGndNone {
			background-color: green;
		    height: 100px;
		    width: 100px;
		    margin: 10px;
		    position: absolute;
		}
		.bckGndBlue {
			background-color: blue;
		    height: 100px;
		    width: 100px;
		    margin: 10px;
		    position: absolute;
		}
		.line {
		    width: 370px;		
		}
		</style>
		<script type="text/javascript">
			var e,cnt,mov;
			var old_pos_x = 0;
			var old_pos_y = 0;
			var tmp_pos_x = 0;
			var tmp_pos_y = 0;
			window.onload = function(){
				initLoader();
				doMove();
			}

			function initLoader() {
				absoluteMove(document.getElementById('loader_0'),0,110);
				absoluteMove(document.getElementById('loader_1'),0,220);
				absoluteMove(document.getElementById('loader_2'),110,220);
				absoluteMove(document.getElementById('loader_3'),220,220);
				absoluteMove(document.getElementById('loader_4'),220,110);
				absoluteMove(document.getElementById('loader_5'),220,0);
				absoluteMove(document.getElementById('loader_6'),110,0);
				absoluteMove(document.getElementById('loader_7'),110,110);				
			}
			
			
			function doMove() {
				if (e == null) {
					e = nextElemet();
					storePosition(e);
					mov=10;
				} else if (checkEndMove(e)) {
					e = nextElemet();
					old_pos_x = tmp_pos_x;
					old_pos_y = tmp_pos_y;
					storePosition(e);

				}
				
				if (old_pos_x == tmp_pos_x) {
					console.log(old_pos_x +' > ' + tmp_pos_x);
					if (old_pos_y > tmp_pos_y) {
						relativeMove(e, 0, -10);
					} else {
						relativeMove(e, 0, 10) ;				
					}				
				} else {
					if (old_pos_x > tmp_pos_x) {
						console.log('Y>');
						relativeMove(e, -10, 0);
					} else {
						console.log('Y');
						relativeMove(e, 10, 0) ;				
					}
				}
				setTimeout(doMove,10);
			 }
			
			 function nextElemet () {
				if (cnt == null || cnt >=6) {
					cnt = 0;
				} else {
					cnt = cnt + 1;	
				}
				return document.getElementById('loader_' + cnt);
			 }

			 function storePosition(item, x, y) {			
				tmp_pos_x = parseInt(item.style.left, 10);
				tmp_pos_y = parseInt(item.style.top, 10);
			 }
			 
			 function absoluteMove(item, x, y) {			
				item.style.left = x + "px";
				item.style.top = y + "px";
			 }
			 
			 function relativeMove(item, x, y) {			
				item.style.left = parseInt(item.style.left, 10) - x + "px";
				item.style.top = parseInt(item.style.top, 10) - y + "px";
			 }
			 
			 function checkEndMove (item) {
				if (parseInt(item.style.left, 10) == old_pos_x && parseInt(item.style.top, 10) == old_pos_y ) {
					return true;
				}
				return false;			
			 }
		</script>
	</head>
	<body bgcolor="red">
		<div class="line">
			<div class="bckGndNone" id="loader_7"></div>
			<div class="bckGndBlue" id="loader_6"></div>
			<div class="bckGndBlue" id="loader_5"></div>
			<div class="bckGndBlue" id="loader_0"></div>
		
			<div class="bckGndBlue" id="loader_4"></div>
			<div class="bckGndBlue" id="loader_1"></div>
			<div class="bckGndBlue" id="loader_2"></div>
			<div class="bckGndBlue" id="loader_3"></div>
		</div>
	</body>
</html>
